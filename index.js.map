{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\n\nconst KEY = '45785559-b0577f06fb94f4ced9a4d3280';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n// export function getSearch(searchText) {\n//     try {\n//         if (searchText.includes(' ')) {\n//             searchText.replace(/\\s+/g, '+');\n//         }\n//         const response = axios.get(`${BASE_URL}`, {\n//             params: {\n//                 key: KEY,\n//                 q: searchText,\n//                 image_type: 'photo',\n//                 orientation: 'horizontal',\n//                 safesearch: true,\n//             }\n//         })\n//         return response;\n//     } catch (error) {\n//         iziToast.error({\n//             title: 'Error',\n//             message: 'Sorry! The site is currently unavailable. Please try later!',\n//         });\n//     }\n// }\n\nexport function getSearch(searchText) {\n    searchText = searchText.replace(/\\s+/g, '+');\n\n    return axios.get(`${BASE_URL}`, {\n        params: {\n            key: KEY,\n            q: searchText,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n        }\n    })\n        .then(response => response)\n        .catch(error => {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry! The site is currently unavailable. Please try later!',\n            });\n            // throw error;\n        });\n}\n","export function createMarkup(array) {\n    return array.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n      </a>\n      <div class=\"thumb-block\">\n        <div class=\"block\">\n          <h2 class=\"title\">Likes</h2>\n          <p class=\"amount\">${likes}</p>\n        </div>\n        <div class=\"block\">\n          <h2 class=\"title\">Views</h2>\n          <p class=\"amount\">${views}</p>\n        </div>\n        <div class=\"block\">\n          <h2 class=\"title\">Comments</h2>\n          <p class=\"amount\">${comments}</p>\n        </div>\n        <div class=\"block\">\n          <h2 class=\"title\">Downloads</h2>\n          <p class=\"amount\">${downloads}</p>\n        </div>\n      </div>\n    </li>`).join('');\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getSearch } from \"./js/pixabay-api\";\nimport { createMarkup } from \"./js/render-functions\";\n\nconst form = document.querySelector('.js-form');\nconst gallery = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.loader');\n\nlet saveQuery = '';\nlet refreshPage;\n\nloader.style.display = 'none';\n\nform.addEventListener('submit', onSearch);\n\nfunction onSearch(evt) {\n    evt.preventDefault()\n    gallery.innerHTML = '';\n\n    loader.style.display = 'block';\n\n    saveQuery = evt.target.elements.query.value.trim();\n\n    if (saveQuery === '') {\n        return iziToast.info({\n            title: 'Hello',\n            message: 'Please enter search text!',\n        }),\n            loader.style.display = 'none',\n            form.reset()\n    }\n\n\n    getSearch(saveQuery)\n        .then(resp => {\n\n            gallery.insertAdjacentHTML(\"beforeend\", createMarkup(resp.data.hits));\n\n            if (!resp.data.hits.length) {\n                iziToast.error({\n                    title: 'Error',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                }),\n                    loader.style.display = 'none';\n                return;\n            }\n\n            loader.style.display = 'none';\n\n            refreshPage = new SimpleLightbox('.gallery a', {\n                captions: true,\n                captionsData: 'alt',\n                captionDelay: 250,\n            });\n            refreshPage.refresh();\n        })\n        .catch(err => {\n\n            loader.style.display = 'none';\n\n            iziToast.error({\n                title: 'Error',\n                message: 'Something went wrong. Please try again later!',\n            });\n\n        });\n    form.reset();\n}"],"names":["KEY","BASE_URL","getSearch","searchText","axios","response","error","iziToast","createMarkup","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","loader","saveQuery","refreshPage","onSearch","evt","resp","SimpleLightbox","err"],"mappings":"+vBAIA,MAAMA,EAAM,qCACNC,EAAW,2BAyBV,SAASC,EAAUC,EAAY,CAClC,OAAAA,EAAaA,EAAW,QAAQ,OAAQ,GAAG,EAEpCC,EAAM,IAAI,GAAGH,CAAQ,GAAI,CAC5B,OAAQ,CACJ,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACf,CACT,CAAK,EACI,KAAKE,GAAYA,CAAQ,EACzB,MAAMC,GAAS,CACZC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,6DACzB,CAAa,CAEb,CAAS,CACT,CClDO,SAASC,EAAaC,EAAO,CAChC,OAAOA,EAAM,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA,sCAC7DL,CAAa;AAAA,0CACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,8BAKtCC,CAAK;AAAA;AAAA;AAAA;AAAA,8BAILC,CAAK;AAAA;AAAA;AAAA;AAAA,8BAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,8BAIRC,CAAS;AAAA;AAAA;AAAA,UAG7B,EAAE,KAAK,EAAE,CACnB,CChBA,MAAMC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAU,SAAS,cAAc,aAAa,EAC9CC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAY,GACZC,EAEJF,EAAO,MAAM,QAAU,OAEvBF,EAAK,iBAAiB,SAAUK,CAAQ,EAExC,SAASA,EAASC,EAAK,CAQnB,GAPAA,EAAI,eAAgB,EACpBL,EAAQ,UAAY,GAEpBC,EAAO,MAAM,QAAU,QAEvBC,EAAYG,EAAI,OAAO,SAAS,MAAM,MAAM,OAExCH,IAAc,GACd,OAAOb,EAAS,KAAK,CACjB,MAAO,QACP,QAAS,2BACrB,CAAS,EACGY,EAAO,MAAM,QAAU,OACvBF,EAAK,MAAO,EAIpBf,EAAUkB,CAAS,EACd,KAAKI,GAAQ,CAIV,GAFAN,EAAQ,mBAAmB,YAAaV,EAAagB,EAAK,KAAK,IAAI,CAAC,EAEhE,CAACA,EAAK,KAAK,KAAK,OAAQ,CACxBjB,EAAS,MAAM,CACX,MAAO,QACP,QAAS,0EAC7B,CAAiB,EACGY,EAAO,MAAM,QAAU,OAC3B,MACH,CAEDA,EAAO,MAAM,QAAU,OAEvBE,EAAc,IAAII,EAAe,aAAc,CAC3C,SAAU,GACV,aAAc,MACd,aAAc,GAC9B,CAAa,EACDJ,EAAY,QAAO,CAC/B,CAAS,EACA,MAAMK,GAAO,CAEVP,EAAO,MAAM,QAAU,OAEvBZ,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+CACzB,CAAa,CAEb,CAAS,EACLU,EAAK,MAAK,CACd"}